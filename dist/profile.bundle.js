(()=>{async function e(e){try{const t=await fetch(`http://13.233.172.115:3000/check-balance/${e}`),n=await t.json();n.error?document.getElementById("balance").textContent="Error fetching balance":document.getElementById("balance").textContent=n.balance}catch(e){document.getElementById("balance").textContent="Failed to fetch balance",console.error("Error fetching balance:",e)}}async function t(){const t=JSON.parse(localStorage.getItem("walletData")),n=t.mnemonic,a=document.getElementById("recipient-address").value,o=document.getElementById("send-amount").value;if(n&&a&&o)try{const c=await fetch("http://13.233.172.115:3000/send-funds",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({mnemonic:n,recipientAddress:a,amount:o})}),d=await c.json();d.error?document.getElementById("send-status").textContent="Error: "+d.error:(document.getElementById("send-status").textContent="Funds sent successfully!",await e(t.address))}catch(e){document.getElementById("send-status").textContent="Failed to send funds",console.error("Error:",e)}else alert("Please fill in all fields")}function n(){window.location.href="lock.html"}window.onload=async function(){const a=localStorage.getItem("walletData");if(!a)return void(document.body.innerHTML="<p>Please create or import a wallet first.</p>");const o=JSON.parse(a);if(!o)return void(document.body.innerHTML="<p>Please create or import a wallet first.</p>");const c=localStorage.getItem("username");document.getElementById("username").textContent=c,document.getElementById("address").textContent=o.address,document.getElementById("balance").textContent=o.balance||"N/A",await e(o.address),document.getElementById("send-funds-btn").addEventListener("click",t),document.getElementById("lock-wallet-btn").addEventListener("click",n),setInterval((async()=>{await e(o.address)}),5e3)}})();